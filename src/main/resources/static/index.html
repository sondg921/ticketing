<!DOCTYPE html>

<html lang="ko">

<head>

    <meta charset="UTF-8">

    <title>í‹°ì¼“íŒ…ì˜ ì‹ </title>

    <style>

        body { font-family: 'Arial', sans-serif; text-align: center; padding: 50px; }

        .container { border: 2px solid #333; padding: 20px; border-radius: 10px; display: inline-block; }

        button { background-color: #ff4757; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin-top: 10px;}

        button:hover { background-color: #ff6b81; }

        #result { margin-top: 20px; font-weight: bold; }

    </style>

</head>

<body>

<div class="container">

    <h1>ğŸ« ì•„ì´ìœ  ì½˜ì„œíŠ¸ ì˜ˆë§¤</h1>

    <p>ë‚¨ì€ ìˆ˜ëŸ‰: ì„œë²„(Redis)ë§Œì´ ì•Œê³  ìˆë‹¤...</p>



    <label>ì‚¬ìš©ì ID: </label>

    <input type="number" id="userId" value="1" placeholder="ID ì…ë ¥">

    <br>

    <button onclick="buyTicket()">ì˜ˆë§¤í•˜ê¸° (ê´‘í´ ê¸ˆì§€)</button>



    <div id="result"></div>

</div>



<script>

    async function buyTicket() {

        const userId = document.getElementById('userId').value;

        const resultDiv = document.getElementById('result');



        // ì•„ê¹Œ ìš°ë¦¬ê°€ ì •í•œ API ëª…ì„¸ëŒ€ë¡œ ìš”ì²­!

        try {

            const response = await fetch('http://localhost:8080/ticketing', {

                method: 'POST',

                headers: {

                    'Content-Type': 'application/json',

                },

                body: JSON.stringify({

                    userId: parseInt(userId),

                    concertId: 1 // 1ë²ˆ ê³µì—° ê³ ì •

                })

            });



            if (response.ok) {

                const data = await response.json(); // ì„±ê³µ ì‹œ Ticket ID ë°›ìŒ

                resultDiv.innerHTML = `<span style="color:green">ğŸ‰ ì„±ê³µ! ëŒ€ê¸° ìˆœë²ˆ: ${data.rank}ë²ˆ (í‹°ì¼“: ${data.ticketId})</span>`;

            } else {

                // 500 ì—ëŸ¬ë‚˜ 400 ì—ëŸ¬ê°€ ì˜¤ë©´ ë§¤ì§„ìœ¼ë¡œ ê°„ì£¼

                const errorText = await response.text();

                resultDiv.innerHTML = `<span style="color:red">ğŸ˜­ ì‹¤íŒ¨: ë§¤ì§„ë˜ì—ˆìŠµë‹ˆë‹¤ (ë˜ëŠ” ì—ëŸ¬)</span>`;

            }

        } catch (error) {

            console.error('Error:', error);

            resultDiv.innerHTML = `<span style="color:red">ì„œë²„ ì—°ê²° ì‹¤íŒ¨!</span>`;

        }

    }

</script>

</body>

</html>